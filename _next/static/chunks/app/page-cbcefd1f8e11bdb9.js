(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6505:function(e,t,s){Promise.resolve().then(s.bind(s,4206))},4206:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return q}});var l,n,i,a,o=s(7437),r=s(2265),c=e=>{let{submitCallback:t,loadCallback:s,saveCallback:l}=e,n=(0,r.useRef)(null),[i,a]=(0,r.useState)(""),[c,d]=(0,r.useState)("");return(0,o.jsxs)("div",{className:"flex bg-slate-400",children:[(0,o.jsx)("button",{className:"flex-none bg-yellow-500 hover:bg-yellow-600 text-white py-1 px-2",onClick:l,children:"Save"}),(0,o.jsx)("input",{type:"file",ref:n,style:{display:"none"},accept:".vqc",onChange:e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(l){let e=new FileReader;e.onload=e=>{var t;s(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsText(l)}}}),(0,o.jsx)("button",{className:"flex-none bg-yellow-500 hover:bg-yellow-600 text-white py-1 px-2",onClick:()=>{n.current&&n.current.click()},children:"Load"}),(0,o.jsxs)("form",{className:"flex flex-auto",children:[(0,o.jsxs)("div",{className:"flex-auto flex py-1 px-2",children:[(0,o.jsx)("div",{className:"flex-none",children:"Mentee CSV:"}),(0,o.jsx)("input",{className:"flex-auto ms-5 w-48",type:"file",id:"menteeInput",name:"menteeInput",accept:".csv",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){let e=new FileReader;e.onload=e=>{var t;d(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsText(s)}}})]}),(0,o.jsxs)("div",{className:"flex-auto flex py-1 px-2",children:[(0,o.jsx)("div",{className:"flex-none",children:"Mentor CSV:"}),(0,o.jsx)("input",{className:"flex-auto ms-5 w-48",type:"file",id:"mentorInput",name:"mentorInput",accept:".csv",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){let e=new FileReader;e.onload=e=>{var t;a(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsText(s)}}})]}),(0,o.jsx)("input",{type:"submit",value:"Match",className:"flex-none bg-blue-500 hover:bg-blue-600 text-white py-1 px-2",onClick:e=>{e.preventDefault(),c&&i?t(c,i):alert("You need to upload mentor and mentee CSVs.")}})]})]})},d=s(947),h=s(3661),m=s(504),u=s(7922),p=s(626),f=s(1951);function x(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];if(t.length<2)throw Error("At least two lists are required for comparison.");let l=t.reduce((e,t)=>e.filter(e=>t.includes(e)));return Array.from(new Set(l))}(l=i||(i={})).DRIVER="driver",l.PASSENGER="passanger",l.SOLO="no carpool",(n=a||(a={})).SOLO="solo",n.COMENTOR="comentor",n.EITHER="either";class y{constructor(e,t){this.question=e,this.answer=t}}class g{isPassenger(){return"passanger"==this.carpoolStyle}isDriver(){return"driver"==this.carpoolStyle}isSolo(){return"no carpool"==this.carpoolStyle}compatible(e){let t=x(this.commutableGyms,e.commutableGyms).length>0,s=e.isSolo()&&this.isSolo(),l=x(this.climbingStyles,e.climbingStyles).length>0,n=x(this.availability,e.availability).length>0,i=this.email!=e.email;return l&&n&&i&&(!s||t)}constructor(e,t,s="they/them",l=[],n=[],i="no carpool",a=[],o=3,r=[],c=0){this.name=e,this.email=t,this.pronouns=s,this.climbingStyles=l,this.commutableGyms=n,this.carpoolStyle=i,this.availability=a,this.groupSize=o,this.otherResponses=r,this.uniqueId=c}}class b extends g{isSoloMentor(){return"solo"==this.wantCoMentor}compatible(e){let t=super.compatible(e);if(!(e instanceof b))return t;{let s=!this.isSoloMentor()&&!e.isSoloMentor(),l=this.groupSize>1&&e.groupSize>1;return t&&s&&l}}constructor(e,t,s="they/them",l=[],n=[],i="no carpool",a=[],o=3,r=[],c="solo",d=0){super(e,t,s,l,n,i,a,o,r,d),this.wantCoMentor=c}}class v{constructor(e=[],t=[]){this.mentees=e,this.mentors=t}}let j=0;class w extends v{people(){return this.mentees.concat(this.mentors)}styles(){let e=[];return(this.people().forEach(t=>{e.push(t.climbingStyles)}),e.length>1)?x(...e):1==e.length?e[0]:[]}nonCarpoolGyms(){let e=[];return(this.people().forEach(t=>e.push(t.commutableGyms)),e.length>1)?x(...e):1==e.length?e[0]:[]}carpoolGyms(){let e=this.nonCarpoolGyms();return this.commutableGyms().filter(t=>!e.includes(t))}commutableGyms(){let e=[],t=this.people(),s=t.filter(e=>e.isDriver());return(t.forEach(t=>{let l=t.commutableGyms;t.isSolo()||s.forEach(e=>{l=l.concat(e.commutableGyms)}),e.push(l)}),e.length>1)?x(...e):1==e.length?e[0]:[]}carpoolGroup(){let e=[];return this.people().forEach(t=>{t.isSolo()||e.push(t)}),e}availability(){let e=[];return(this.people().forEach(t=>{e.push(t.availability)}),e.length>1)?x(...e):1==e.length?e[0]:[]}openSlots(){let e=100;return this.mentors.forEach(t=>{e=Math.min(e,t.groupSize)}),this.mentees.forEach(t=>{e=Math.min(e,t.groupSize)}),e-this.mentees.length}compatible(e){if(0==this.mentors.length&&0==this.mentees.length)return!0;let t=!e.isSolo()&&this.people().filter(e=>e.isDriver()).length>0,s=x(this.commutableGyms(),e.commutableGyms).length>0,l=!(e instanceof b)&&this.openSlots()>0&&e.groupSize>this.mentees.length,n=l||e instanceof b&&this.mentors.length<2,i=0==this.mentees.filter(t=>!t.compatible(e)).length,a=0==this.mentors.filter(t=>!t.compatible(e)).length,o=x(this.styles(),e.climbingStyles).length>0,r=x(this.availability(),e.availability).length>0;return n&&(s||t)&&i&&a&&o&&r}constructor(e=[],t=[],s=String(j++)){super(e,t),this.uniqueId=s}}var C=e=>{let{isOpen:t,onClose:s,children:l}=e,n=(0,r.useRef)(null);return((0,r.useEffect)(()=>{var e;null===(e=n.current)||void 0===e||e.focus()},[t]),t)?(0,o.jsxs)("dialog",{ref:n,className:"fixed top-0 left-0 w-full h-full flex items-center justify-center",onKeyDown:e=>{"Escape"===e.key&&s()},children:[(0,o.jsx)("div",{className:"absolute bg-gray-800 opacity-75 inset-0",onClick:s}),(0,o.jsxs)("div",{className:"bg-white rounded-lg p-8 z-10 divide-y divide-solid divide-purple-900 max-h-full overflow-y-auto",children:[l,(0,o.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:s,children:"Close"})]})]}):null},N=s(4131),S=e=>{let{text:t,children:s=[]}=e,l=N.createHash("md5").update(t).digest("hex"),n=parseInt(l.substr(0,2),16)%200,i=parseInt(l.substr(2,2),16)%200,a=parseInt(l.substr(4,2),16)%200,r="rgb(".concat(n,", ").concat(i,", ").concat(a,")"),c="rgb(".concat(.75*n,", ").concat(.75*i,", ").concat(.75*a,")");return(0,o.jsxs)("span",{className:"text-xs font-bold bg-pink-600 border-pink-700 p-1 border-2 border-solid text-white rounded-lg",style:{backgroundColor:r,borderColor:c},children:[s,t]})},K=e=>{let{person:t,team:s,onMoved:l,ghost:n=!1}=e,[i,a]=(0,r.useState)(!1),c=t instanceof b,[{isDragging:d},h]=(0,f.c)(()=>({type:c?"Mentor":"Person",item:{person:t,team:s,onMoved:l},collect:e=>({isDragging:e.isDragging()})}));return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"border-2 border-black border-solid rounded-lg flex flex-wrap text-sm m-1 hover:bg-purple-600 hover:cursor-pointer hover:border-white",style:{backgroundColor:c?"#fef08a":"#d9f99d",opacity:n?.3:1},onClick:()=>{a(!0)},ref:n?null:h,children:[(0,o.jsx)(S,{text:t.pronouns}),(0,o.jsx)("h2",{className:"flex-auto p-1",children:t.name})]}),(0,o.jsxs)(C,{isOpen:i,onClose:()=>{a(!1)},children:[(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h1",{className:"mr-2 font-bold",children:t.name}),(0,o.jsx)(S,{text:t.pronouns})]}),(0,o.jsx)("p",{className:"p-4",children:t.email}),(0,o.jsx)("div",{className:"flex flex-wrap p-4",children:t.climbingStyles.map((e,t)=>(0,o.jsx)(S,{text:e},t))}),(0,o.jsx)("div",{className:"flex flex-wrap p-4",children:t.commutableGyms.map((e,t)=>(0,o.jsx)(S,{text:e},t))}),c&&(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"Mentor Style:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.wantCoMentor})]}),(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"Carpool Choice:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.carpoolStyle})]}),(0,o.jsx)("div",{className:"flex flex-wrap p-4",children:t.availability.map((e,t)=>(0,o.jsx)(S,{text:e},t))}),(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"Group Size:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.groupSize})]}),(0,o.jsx)("div",{className:"p-4",children:t.otherResponses.map((e,t)=>(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsx)("p",{className:"font-bold text-sm",children:e.question}),(0,o.jsx)("p",{className:"text-sm",children:e.answer})]},t))})]})]})},M=e=>{let{team:t,deleteMe:s}=e,[l,n]=(0,r.useState)([...t.mentors]),[i,a]=(0,r.useState)([...t.mentees]),[c,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[x,y]=(0,r.useState)(null),g=e=>{t.mentors=[...e],n(e)},b=e=>{t.mentees=[...e],a(e)},v=e=>{g(t.mentors.filter(t=>t.uniqueId!=e.uniqueId))},j=e=>{b(t.mentees.filter(t=>t.uniqueId!=e.uniqueId))},[{isOverMentor:w,draggedMentor:N},M]=(0,p.L)({accept:"Mentor",hover(e){e.team!==t&&f(e.person)},drop(e,s){if(e.team!==t)return g(t.mentors.concat(e.person)),e.onMoved(),e},collect:e=>({isOverMentor:e.isOver(),draggedMentor:e.getItem()})});!w&&h&&f(null);let[{isOverMentee:E,draggedMentee:k},G]=(0,p.L)({accept:"Person",hover(e){e.team!==t&&y(e.person)},drop(e,s){if(e.team!==t)return b(t.mentees.concat(e.person)),e.onMoved(),e},collect:e=>({isOverMentee:e.isOver(),draggedMentee:e.getItem()})});!E&&x&&y(null);let I="#818cf8",D=k||N;return D&&(I=t.compatible(D.person)?"#4ade80":"#f87171"),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"border-solid border-4 rounded-md bg-white divide-y divide-indigo-400 bg-slate-100 m-2 p-2",style:{borderColor:I},children:[(0,o.jsxs)("div",{ref:M,children:[(0,o.jsxs)("div",{className:"font-bold",children:["Mentors (",l.length,")"]}),(0,o.jsxs)("div",{className:"flex flex-wrap",children:[l.map(e=>(0,o.jsx)(K,{person:e,team:t,onMoved:()=>v(e)},"mentor"+e.uniqueId)),null!=h?(0,o.jsx)(K,{ghost:!0,person:h,team:t}):(0,o.jsx)(o.Fragment,{})]})]}),(0,o.jsxs)("div",{ref:G,children:[(0,o.jsxs)("div",{className:"font-bold",children:["Mentees (",i.length,")"]}),(0,o.jsxs)("div",{className:"flex flex-wrap",children:[i.map((e,s)=>(0,o.jsx)(K,{person:e,team:t,onMoved:()=>j(e)},"mentee"+e.uniqueId)),null!=x?(0,o.jsx)(K,{ghost:!0,person:x,team:t}):(0,o.jsx)(o.Fragment,{})]})]}),(0,o.jsxs)("div",{className:"divide-2 divide-indigo-400 divide-y text-sm",children:[(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"font-bold text-center",children:"Climbing Styles"}),(0,o.jsx)("div",{className:"flex flex-wrap",children:t.styles().map(e=>(0,o.jsx)(S,{text:e},e+t.uniqueId))})]}),(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"font-bold text-center",children:"Gyms"}),(0,o.jsxs)("div",{className:"flex flex-wrap",children:[t.nonCarpoolGyms().map((e,s)=>(0,o.jsx)(S,{text:e},e+t.uniqueId)),t.carpoolGyms().map(e=>(0,o.jsx)(S,{text:e,children:(0,o.jsx)(m.G,{className:"mr-2",icon:u.yn$})},e+t.uniqueId))]})]}),(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"font-bold text-center",children:"Availability"}),(0,o.jsx)("div",{className:"flex flex-wrap",children:t.availability().map(e=>(0,o.jsx)(S,{text:e},e+t.uniqueId))})]})]}),(0,o.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>{d(!0)},children:"Details"}),0==t.people().length?(0,o.jsx)("button",{className:"mt-4 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 float-right",onClick:s,children:"Delete"}):(0,o.jsx)(o.Fragment,{})]}),(0,o.jsxs)(C,{isOpen:c,onClose:()=>{d(!1)},children:[(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"Emails:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.people().map(e=>e.email).join(", ")})]}),(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"Climbing Styles:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.styles().join(", ")})]}),(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"Availability:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.availability().join(", ")})]}),(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"Compatible Gyms:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.commutableGyms().join(", ")})]}),(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"Carpool Required Gyms:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.carpoolGyms().join(", ")})]}),(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"No Carpool Gyms:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.nonCarpoolGyms().join(", ")})]}),(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"Carpool Drivers:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.carpoolGroup().filter(e=>e.isDriver()).map(e=>e.name).join(", ")})]}),(0,o.jsxs)("div",{className:"flex flex-wrap p-4",children:[(0,o.jsx)("h3",{className:"flex-none font-bold mr-2",children:"Carpool Passengers:"}),(0,o.jsx)("p",{className:"flex-auto",children:t.carpoolGroup().filter(e=>e.isPassenger()).map(e=>e.name).join(", ")})]})]})]})},E=e=>{let{teams:t,deleteTeam:s,createTeam:l}=e;return(0,o.jsx)(d.W,{backend:h.PD,children:(0,o.jsxs)("div",{className:"grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2",children:[t.map(e=>(0,o.jsx)(M,{team:e,deleteMe:()=>s(e.uniqueId)},e.uniqueId)),t.length>0?(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:l,children:"Add new team"})}):(0,o.jsx)(o.Fragment,{})]})})},k=s(8922);class G{constructor(e="first and last name",t="contact email",s="pronouns",l="styles and skills",n="with a partner mentor",i="how many people",a="comfortable commuting to on your own",o="interested in carpooling",r="monday",c="tuesday",d="wednesday",h="thursday",m="friday",u="saturday",p="sunday"){this.nameKey=e,this.emailKey=t,this.pronounsKey=s,this.climbingStylesKey=l,this.wantCoMentorKey=n,this.groupSizeKey=i,this.commutableGymsKey=a,this.carpoolKey=o,this.mondayKey=r,this.tuesdayKey=c,this.wednesdayKey=d,this.thursdayKey=h,this.fridayKey=m,this.saturdayKey=u,this.sundayKey=p}}class I{constructor(e="first and last name",t="contact email",s="pronouns",l="skills you would like to work on",n="group size",i="comfortable commuting to on your own",a="interested in carpooling",o="monday",r="tuesday",c="wednesday",d="thursday",h="friday",m="saturday",u="sunday"){this.nameKey=e,this.emailKey=t,this.pronounsKey=s,this.climbingStylesKey=l,this.groupSizeKey=n,this.commutableGymsKey=i,this.carpoolKey=a,this.mondayKey=o,this.tuesdayKey=r,this.wednesdayKey=c,this.thursdayKey=d,this.fridayKey=h,this.saturdayKey=m,this.sundayKey=u}}class D{readMentors(e){let t=(0,k.Q)(e,{columns:!0,skip_empty_lines:!0}),s=[];return t.forEach(e=>{s.push(this.buildMentor(e))}),s}buildMentor(e){let t=new b("","","");for(let s in t.uniqueId=this.id++,e){let l=s.toLowerCase().trim();if(l.includes(this.mentorConfig.nameKey))t.name=e[s];else if(l.includes(this.mentorConfig.emailKey))t.email=e[s];else if(l.includes(this.mentorConfig.pronounsKey))t.pronouns=e[s];else if(l.includes(this.mentorConfig.climbingStylesKey))t.climbingStyles=e[s].toLowerCase().replace(/(\s|\([^)]*\))/g,"").split(",");else if(l.includes(this.mentorConfig.wantCoMentorKey))switch(e[s].toLowerCase().trim()){case"with a partner mentor":t.wantCoMentor=a.COMENTOR;break;case"on my own":t.wantCoMentor=a.SOLO;break;default:t.wantCoMentor=a.EITHER}else if(l.includes(this.mentorConfig.groupSizeKey))t.groupSize=parseInt(e[s]);else if(l.includes(this.mentorConfig.commutableGymsKey))t.commutableGyms=e[s].toLowerCase().replace(/(\s|\([^)]*\))/g,"").split(",");else if(l.includes(this.mentorConfig.carpoolKey))switch(e[s].toLowerCase().trim()){case"yes, i have a car":t.carpoolStyle=i.DRIVER;break;case"yes, i need a ride":t.carpoolStyle=i.PASSENGER;break;default:t.carpoolStyle=i.SOLO}else this.handleDate(t,s,e,this.mentorConfig.mondayKey)||this.handleDate(t,s,e,this.mentorConfig.tuesdayKey)||this.handleDate(t,s,e,this.mentorConfig.wednesdayKey)||this.handleDate(t,s,e,this.mentorConfig.thursdayKey)||this.handleDate(t,s,e,this.mentorConfig.fridayKey)||this.handleDate(t,s,e,this.mentorConfig.saturdayKey)||this.handleDate(t,s,e,this.mentorConfig.sundayKey)||t.otherResponses.push(new y(s,e[s]))}return t}handleDate(e,t,s,l){if(t.toLowerCase().trim().includes(l)){let n=s[t].toLowerCase().replace(/\s/g,"");return n.includes("notavailable")||n.split(",").forEach(t=>{e.availability.push(l+t)}),!0}return!1}readMentees(e){let t=(0,k.Q)(e,{columns:!0,skip_empty_lines:!0}),s=[];return t.forEach(e=>{s.push(this.buildMentee(e))}),s}buildMentee(e){let t=new g("","","");for(let s in t.uniqueId=this.id++,e){let l=s.toLowerCase().trim();if(l.includes(this.menteeConfig.nameKey))t.name=e[s];else if(l.includes(this.menteeConfig.emailKey))t.email=e[s];else if(l.includes(this.menteeConfig.pronounsKey))t.pronouns=e[s];else if(l.includes(this.menteeConfig.climbingStylesKey))t.climbingStyles=e[s].toLowerCase().replace(/(\s|\([^)]*\))/g,"").split(",");else if(l.includes(this.menteeConfig.groupSizeKey))t.groupSize=parseInt(e[s]);else if(l.includes(this.menteeConfig.commutableGymsKey))t.commutableGyms=e[s].toLowerCase().replace(/(\s|\([^)]*\))/g,"").split(",");else if(l.includes(this.menteeConfig.carpoolKey))switch(e[s].toLowerCase().trim()){case"yes, i have a car":t.carpoolStyle=i.DRIVER;break;case"yes, i need a ride":t.carpoolStyle=i.PASSENGER;break;default:t.carpoolStyle=i.SOLO}else this.handleDate(t,s,e,this.menteeConfig.mondayKey)||this.handleDate(t,s,e,this.menteeConfig.tuesdayKey)||this.handleDate(t,s,e,this.menteeConfig.wednesdayKey)||this.handleDate(t,s,e,this.menteeConfig.thursdayKey)||this.handleDate(t,s,e,this.menteeConfig.fridayKey)||this.handleDate(t,s,e,this.menteeConfig.saturdayKey)||this.handleDate(t,s,e,this.menteeConfig.sundayKey)||t.otherResponses.push(new y(s,e[s]))}return t}constructor(e=new G,t=new I,s=Math.floor(100*Math.random())+1){this.mentorConfig=e,this.menteeConfig=t,this.id=s}}var O=s(4098),R=s.n(O);function q(){let[e,t]=(0,r.useState)(!1),[s,l]=(0,r.useState)([]);return(0,o.jsxs)("body",{className:"font-sans",children:[(0,o.jsx)(c,{submitCallback:(e,s)=>{var n;let i,o,r;t(!0);let c=new D;l((n=new v(c.readMentees(e),c.readMentors(s)),i=R()(n.mentors),function(e,t){let s;let l=(s=e=>{let t=Math.min(e.climbingStyles.length,e.commutableGyms.length,e.availability.length);return(3-e.groupSize)*1e4+1e3*t},e.sort((e,t)=>s(e)>s(t)?1:-1));t.forEach(e=>{for(let t=0;t<l.length;t++){let s=l[t];if(e.compatible(s)&&(e.mentees.push(s),l.splice(t,1),t--),0>=e.openSlots())break}})}(o=R()(n.mentees),r=function(e){var t;let s;t=e,s=e=>{let t=0;return e.wantCoMentor==a.COMENTOR&&(t=1),e.wantCoMentor==a.EITHER&&(t=2),1e6*t+1e3*Math.min(e.climbingStyles.length,e.commutableGyms.length,e.availability.length)};let l=[],n=[];for((e=t.sort((e,t)=>s(e)>s(t)?1:-1)).forEach(e=>{e.isSoloMentor()?l.push(new w([],[e])):n.push(e)});n.length>0;){let e=n[0];if(e.wantCoMentor==a.EITHER){l.push(new w([],[e])),n.splice(0,1);continue}let t=!1;for(let s=1;s<n.length;s++){let i=n[s];if(i.compatible(e)){l.push(new w([],[e,i])),n.splice(s,1),n.splice(0,1),t=!0;break}}t||(l.push(new w([],[e])),n.splice(0,1))}return l}(i)),o.length>0&&r.push(new w(o,[])),r)),t(!1)},loadCallback:e=>{t(!0);let s=Math.floor(100*Math.random())+1,n=JSON.parse(e).map(e=>new w(e.mentees.map(e=>{let t=Object.assign(new g("",""),e);return t.uniqueId=s++,t}),e.mentors.map(e=>{let t=Object.assign(new b("",""),e);return t.uniqueId=s++,t})));l(n),t(!1)},saveCallback:()=>{let e=JSON.stringify(s,null,2),t=new Blob([e],{type:"application/json"}),l=document.createElement("a");l.href=URL.createObjectURL(t),l.download="VQCMatcherState.vqc",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}),(0,o.jsxs)("div",{className:"h-screen w-screen",children:[e?(0,o.jsx)("p",{className:"text-white text-center",children:"Loading..."}):(0,o.jsx)(o.Fragment,{}),0==s.length?(0,o.jsx)("p",{className:"text-white text-center",children:"Upload mentor and mentee CSVs and press Match, or load a previously saved file."}):(0,o.jsx)(o.Fragment,{}),(0,o.jsx)(E,{teams:s,deleteTeam:e=>{l(s.filter(t=>t.uniqueId!=e))},createTeam:()=>{l(s.concat(new w))}})]})]})}}},function(e){e.O(0,[676,218,582,971,472,744],function(){return e(e.s=6505)}),_N_E=e.O()}]);